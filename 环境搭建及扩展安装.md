Git地址：https://github.com/lexin-fintech/dubbo-php-framework

###第一章 环境搭建及扩展安装
环境说明：
系统：Red Hat 4.4.7-17 内核：2.6.32-642.el6.x86_64
PHP版本：PHP-7.0.9
swoole版本：4.0.2及以上
Redis php扩展版本: 3.1.3
Redis版本： 3.0.0
Zookeeper php扩展版本：0.5.0
Zookeeper版本：3.4.10

####PHP安装
要用dubbo-php-framework，首先需要有PHP环境。
PHP下载地址：http://php.net/
在这里你可以选用7.0以上的版本下载源码包安装，解压至本地任意目录（保证读写权限），留待使用。
安装PHP前，需要安装编译环境和PHP的相关依赖。下面是相关命令：
Red Hat环境下：
```bash
sudo yum -y install git
sudo yum -y install gcc gcc-c++ autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip2-devel ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl openssl-devel openldap openldap-devel nss_ldap openldap-clients openldap-servers gd gd2 gd-devel gd2-devel perl-CPAN pcre-devel
```
（注：以上命令是我在实际使用中验证过的可以使用的，可能会和其他教程提供的命令不同）
当上述命令执行后，即可开始安装PHP。命令如下：
```bash
cd /usr/local/src
sudo wget http://am1.php.net/distributions/php-7.0.9.tar.gz
sudo tar -xvf php-7.0.9.tar.gz
sudo cd php-7.0.9
sudo ./configure --prefix=/usr/local/php --with-config-file-path=/etc/php --enable-fpm --enable-pcntl --enable-mysqlnd --enable-opcache --enable-sockets --enable-sysvmsg --enable-sysvsem  --enable-sysvshm --enable-shmop --enable-zip --enable-ftp --enable-soap --enable-xml --enable-mbstring --disable-rpath --disable-debug --disable-fileinfo --with-mysql=mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --with-pcre-regex --with-iconv --with-zlib --with-mcrypt --with-gd --with-openssl --with-mhash --with-xmlrpc --with-curl --with-imap-ssl
sudo make
sudo make install
sudo cp php.ini-development /etc/php/
```
至此，PHP已经成功安装，但是此时在终端里是无法直接通过php --version查看php版本的还需要将PHP的可执行目录添加到环境变量中。
使用vim打开~/.bash_profile，在末尾添加如下内容：
```shell
export PATH=/usr/local/php/bin:$PATH
export PATH=/usr/local/php/sbin:$PATH
```
保存后，终端输入命令：
```bash
source ~/.bash_profile
```
此时即可通过php --version查看php版本，看到如下内容：
```shell
PHP 7.0.9 (cli) (built: Jun 21 2018 18:09:40) ( NTS )
Copyright (c) 1997-2016 The PHP Group
Zend Engine v3.0.0, Copyright (c) 1998-2016 Zend Technologies
```
即说明安装成功。
####Swoole安装
安装完PHP后，即可安装swoole扩展。
swoole扩展下载地址：https://github.com/swoole/swoole-src/releases
尽量选择stable版本，alpha版本最好仅用于实验新特性。
解压源码至任意目录，执行编译安装：
下面采用git下载源码安装：
```bash
cd /usr/local/src
sudo git clone https://github.com/swoole/swoole-src.git
cd swoole-src
sudo phpize
sudo ./configure
sudo make
sudo make install
```
(注：swoole的./configure有很多额外参数，可以通过./configure --help命令查看，这里选择默认项)
安装完成后，进入/etc/php目录下，打开php.ini文件，在其中加上如下一句：
```shell
sudo vim /etc/php.ini 添加extension=swoole.so
```
随后在终端中输入命令
```bash
php -m
```
查看扩展安装情况。如果在列出的扩展中看到了swoole，则说明安装成功。
####Redis安装
安装Redis php扩展前先安装redis-3.0.0
```bash
cd /usr/local/src
sudo wget http://download.redis.io/releases/redis-3.0.0.tar.gz
sudo tar -zxvf redis-3.0.0.tar.gz
sudo cd redis-3.0.0
#如果不加参数,linux下会可能报错
sudo make MALLOC=libc
sudo make install
####启动redis
redis.conf修改：
redis-server /etc/redis/redis.conf
```
####Redis php扩展安装
```bash
cd /usr/local/src
sudo wget http://pecl.php.net/get/redis-3.1.3.tgz
sudo tar -zxvf redis-3.1.3.tgz
sudo cd redis-3.1.3
sudo phpize
sudo ./configure --with-php-config=/usr/bin/php-config
sudo make
sudo make install
```
```shell
sudo vim /etc/php.ini 添加：extension=redis.so
```
随后在终端中输入命令
```bash
php -m
```
查看扩展安装情况。如果在列出的扩展中看到了redis，则说明安装成功。
####Zookeeper安装
安装Zookeeper php扩展前先安装zookeeper-3.4.6
```bash
cd /usr/local/src
sudo wget http://mirrors.hust.edu.cn/apache/zookeeper/zookeeper-3.4.10/zookeeper-3.4.10.tar.gz
sudo tar -zxvf zookeeper-3.4.10.tar.gz 
cd zookeeper-3.4.10/src/c
sudo ./configure --prefix=/usr/local
sudo make
sudo make install
```
####Zookeeper php扩展安装
```bash
cd /usr/local/src
sudo wget http://pecl.php.net/get/zookeeper-0.5.0.tgz
sudo tar -xvf zookeeper-0.5.0.tgz
cd zookeeper-0.5.0
sudo phpize
sudo ./configure --with-php-config=/usr/bin/php-config
sudo make
sudo make install
```
```shell
sudo vim /etc/php.ini 添加：extension=zookeeper.so
随后在终端中输入命令
```
```bash
php -m
```
查看扩展安装情况。如果在列出的扩展中看到了zookeeper，则说明安装成功。
####dubbo-php-framework安装
```bash
cd $WorkPath (自己的工作目录)
sudo git clone https://github.com/lexin-fintech/dubbo-php-framework.git
```